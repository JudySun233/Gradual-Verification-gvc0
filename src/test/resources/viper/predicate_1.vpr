field $intValue: Ref

predicate testPred(value: Ref) {
  acc(value.$intValue, write)
}

method main() returns ($result: Int)
{
  var a: Ref
  a := new($intValue)
  fold acc(testPred(a), write)
  test(a)
  $result := 0
}

method test(value: Ref)
  requires acc(testPred(value), write)
{
  unfold acc(testPred(value), write)
  value.$intValue := 1
}