field $refValue: Ref

predicate testPred(value: Ref) {
  acc(value.$refValue, write)
}

method main() returns ($result: Int)
{
  var a: Ref
  a := new($refValue)
  fold acc(testPred(a), write)
  test(a)
  $result := 0
}

method test(value: Ref)
  requires acc(testPred(value), write)
{
  fold acc(testPred(value), write)
  value.$refValue := 1
}